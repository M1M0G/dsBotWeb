(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[3],{52:function(e,t,n){e.exports={songPanel:"index-songPanel-2q4k",audioDuration:"index-audioDuration-2iTl",inputUrl:"index-inputUrl-3Orv",controls:"index-controls-1f01",audioStream:"index-audioStream-1RQJ",songContainer:"index-songContainer-3DS7",audio:"index-audio-263z",timer:"index-timer-3Hn6",audioPlayer:"index-audioPlayer-2_0P"}},54:function(e,t,n){e.exports={queue:"index-queue-3Hup",queueItem:"index-queueItem-3sbN",queueContainer:"index-queueContainer-15h3",empty:"index-empty-3G84"}},55:function(e,t,n){e.exports={addonsContainer:"index-addonsContainer-IwvF"}},56:function(e,t,n){e.exports={addons:"index-addons-3s9_"}},58:function(e,t,n){"use strict";n.r(t);var r=n(26),o=n(27),a=n(29),c=n(28),s=n(0),i=n.n(s),u=n(15),l=n(9),d=n.n(l),j=n(19),p=n(31),h=n(52),b=n.n(h);var f=n(32);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(i){o=!0,a=i}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}}(e,t)||Object(f.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=function(e){var t=Math.floor(e/60/60),n=Math.floor(e/60)-60*t,r=Math.floor(e%60),o=[t.toString(),n.toString(),r.toString()];return 0===t?"".concat(o[1],":").concat(o[2].padStart(2,"0")):"".concat(o[0].padStart(2,"0"),":").concat(o[1].padStart(2,"0"),":").concat(o[2].padStart(2,"0"))},x=n(3);var v,S,g,y,k=function(e){var t=O(i.a.useState(null),2),n=t[0],r=t[1],o=O(i.a.useState(!1),2),a=o[0],c=o[1],u=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/skip");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/pause");case 2:c(!a);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){var e=new EventSource("/api/duration");return e.onmessage=function(e){return p(JSON.parse(e.data))},e.onerror=function(){return e.close()},function(){return e.close()}}),[e.song]);var p=function(e){r(Math.ceil(+e.playTime/1e3))};return Object(x.jsxs)("div",{className:b.a.audioPlayer,children:[Object(x.jsx)("legend",{children:"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043f\u0435\u0441\u043d\u044f: "}),Object(x.jsx)("h3",{children:e.song.title}),Object(x.jsxs)("div",{className:b.a.audioStream,children:[Object(x.jsx)("input",{type:"range",className:b.a.audio,value:n,max:e.song.length}),Object(x.jsxs)("div",{className:b.a.timer,children:[m(n)," | ",m(e.song.length)]})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{className:b.a.controls,onClick:function(){l()},children:"||"}),Object(x.jsx)("button",{className:b.a.controls,onClick:function(){u()},children:">"})]})]})},C=Object(u.c)(v=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).playSong=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/play",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({url:o.state.songUrl})});case 2:o.setState({songUrl:""});case 3:case"end":return e.stop()}}),e)}))),o.state={songUrl:""},o}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.rootStore,n=this.state;n.progress,n.duration;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:b.a.songPanel,children:[Object(x.jsx)("input",{className:b.a.inputUrl,placeholder:"\u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 URL",value:this.state.songUrl,onChange:function(t){return e.setState({songUrl:t.target.value})}}),Object(x.jsx)("button",{className:b.a.controls,onClick:this.playSong,children:"+"})]}),t.songs.length>0?Object(x.jsx)("div",{className:b.a.songContainer,children:Object(x.jsx)(k,{song:t.songs[0]})}):null]})}}]),n}(s.Component))||v,N=n(54),w=n.n(N),T=Object(u.c)(S=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:w.a.queueContainer,children:[Object(x.jsx)("h3",{children:"\u041e\u0447\u0435\u0440\u0435\u0434\u044c"}),Object(x.jsx)("ul",{className:w.a.queue,children:this.props.rootStore.songs.length>0?this.props.rootStore.songs.map((function(e){return Object(x.jsxs)("li",{className:w.a.queueItem,children:[Object(x.jsx)("p",{children:e.title}),Object(x.jsx)("span",{children:m(e.length)})]},e.id)})):Object(x.jsx)("li",{children:Object(x.jsx)("div",{className:w.a.empty,children:"\u041f\u0443\u0441\u0442\u043e"})})})]})}}]),n}(s.Component))||S,q=n(55),P=n.n(q),U=n(56),_=n.n(U),E=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:_.a.addons})}}]),n}(s.Component),D=Object(u.b)("rootStore")(g=Object(u.c)(g=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).connect=function(){var e,t=new WebSocket("ws:".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DOMAIN)),n=Object(p.a)(o);t.onopen=function(){console.log("connected websocket"),o.setState({ws:t}),n.timeout=250,clearTimeout(e)},t.onclose=function(t){console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(10,(n.timeout+n.timeout)/1e3)," second."),t.reason),n.timeout=n.timeout+n.timeout,e=setTimeout(o.check,Math.min(1e4,n.timeout))},t.onmessage=function(e){var t=JSON.parse(e.data);t.queue&&o.props.rootStore.checkQueue(t)},t.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),t.close()}},o.checkQueue=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/queue");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o.props.rootStore.checkQueue(n);case 7:case"end":return e.stop()}}),e)}))),o.state={queue:null,ws:null},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.connect(),this.checkQueue()}},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(C,{rootStore:this.props.rootStore}),Object(x.jsxs)("div",{className:P.a.addonsContainer,children:[Object(x.jsx)(T,{rootStore:this.props.rootStore}),Object(x.jsx)(E,{})]})]})}}]),n}(s.Component))||g)||g,I=Object(u.c)(y=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsx)(D,{})})}}]),n}(s.Component))||y;t.default=I}}]);
//# sourceMappingURL=3.4dc4dd86.chunk.js.map