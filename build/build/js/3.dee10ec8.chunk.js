(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[3],{52:function(e,t,n){e.exports={songPanel:"index-songPanel-2q4k",audioDuration:"index-audioDuration-2iTl",inputUrl:"index-inputUrl-3Orv",controls:"index-controls-1f01",audioStream:"index-audioStream-1RQJ",songContainer:"index-songContainer-3DS7",audio:"index-audio-263z",timer:"index-timer-3Hn6",audioPlayer:"index-audioPlayer-2_0P",slideRight:"index-slideRight-1_LP"}},54:function(e,t,n){e.exports={queue:"index-queue-3Hup",queueItem:"index-queueItem-3sbN",slideRight:"index-slideRight-3gm1",queueContainer:"index-queueContainer-15h3",empty:"index-empty-3G84"}},55:function(e,t,n){e.exports={addonsContainer:"index-addonsContainer-IwvF"}},56:function(e,t,n){e.exports={addons:"index-addons-3s9_",history:"index-history-3vyT"}},58:function(e,t,n){"use strict";n.r(t);var o=n(26),r=n(27),a=n(29),c=n(28),s=n(0),i=n.n(s),u=n(16),l=n(4),d=n.n(l),j=n(12),h=n(31),b=n(52),p=n.n(b);var O=n(32);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,a=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);o=!0);}catch(i){r=!0,a=i}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}return n}}(e,t)||Object(O.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(e){var t=Math.floor(e/60/60),n=Math.floor(e/60)-60*t,o=Math.floor(e%60),r=[t.toString(),n.toString(),o.toString()];return 0===t?"".concat(r[1],":").concat(r[2].padStart(2,"0")):"".concat(r[0].padStart(2,"0"),":").concat(r[1].padStart(2,"0"),":").concat(r[2].padStart(2,"0"))},x=n(3);var g,v,S,y,k=function(e){var t=m(i.a.useState(null),2),n=t[0],o=t[1],r=m(i.a.useState(!1),2),a=r[0],c=r[1];Object(s.useEffect)((function(){var e=new EventSource("/api/duration");return e.onmessage=function(e){return u(JSON.parse(e.data))},e.onerror=function(){return e.close()},function(){return e.close()}}),[e.song]);var u=function(e){o(Math.ceil(+e.playTime/1e3))};return Object(x.jsxs)("div",{className:p.a.audioPlayer,children:[Object(x.jsx)("legend",{children:"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043f\u0435\u0441\u043d\u044f: "}),Object(x.jsx)("h3",{children:e.song.title}),Object(x.jsxs)("div",{className:p.a.audioStream,children:[Object(x.jsx)("input",{type:"range",className:p.a.audio,value:n,max:e.song.length}),Object(x.jsxs)("div",{className:p.a.timer,children:[f(n)," | ",f(e.song.length)]})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{className:p.a.controls,onClick:function(){e.song.pauseSong(),c(!a)},children:"||"}),Object(x.jsx)("button",{className:p.a.controls,onClick:function(){e.song.skipSong()},children:">"})]})]})},C=Object(u.c)(g=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).playSong=function(e){"Enter"===e.key&&(console.log(r.state.songUrl),r.props.rootStore.playSong(r.state.songUrl),r.setState({songUrl:""}))},r.state={songUrl:""},r}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props.rootStore,n=this.state;n.progress,n.duration;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:p.a.songPanel,children:[Object(x.jsx)("input",{className:p.a.inputUrl,placeholder:"\u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 URL",value:this.state.songUrl,onChange:function(t){return e.setState({songUrl:t.target.value})},onKeyDown:this.playSong}),Object(x.jsx)("button",{className:p.a.controls,onClick:this.playSong,children:"+"})]}),t.songs.length>0?Object(x.jsx)("div",{className:p.a.songContainer,children:Object(x.jsx)(k,{song:t.songs[0]})}):null]})}}]),n}(s.Component))||g,N=n(54),w=n.n(N),q=Object(u.c)(v=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:w.a.queueContainer,children:[Object(x.jsx)("h3",{children:"\u041e\u0447\u0435\u0440\u0435\u0434\u044c"}),Object(x.jsx)("ul",{className:w.a.queue,children:this.props.rootStore.songs.length>0?this.props.rootStore.songs.map((function(e){return Object(x.jsxs)("li",{className:w.a.queueItem,children:[Object(x.jsx)("p",{children:e.title}),Object(x.jsx)("span",{children:f(e.length)})]},e.id)})):Object(x.jsx)("li",{children:Object(x.jsx)("div",{className:w.a.empty,children:"\u041f\u0443\u0441\u0442\u043e"})})})]})}}]),n}(s.Component))||v,U=n(55),P=n.n(U),M=n(56),R=n.n(M),I=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:R.a.addons})}}]),n}(s.Component),T=Object(u.b)("rootStore")(S=Object(u.c)(S=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).connect=function(){var e,t=new WebSocket("wss://dsbotweb.herokuapp.com"),n=Object(h.a)(r);t.onopen=function(){console.log("connected websocket"),r.setState({ws:t}),n.timeout=250,clearTimeout(e)},t.onclose=function(t){console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(10,(n.timeout+n.timeout)/1e3)," second."),t.reason),n.timeout=n.timeout+n.timeout,e=setTimeout(r.check,Math.min(1e4,n.timeout))},t.onmessage=function(e){var t=JSON.parse(e.data);t.queue&&r.props.rootStore.checkQueue(t)},t.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),t.close()}},r.checkQueue=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/queue");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r.props.rootStore.checkQueue(n);case 7:case"end":return e.stop()}}),e)}))),r.state={queue:null,ws:null},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.connect(),this.checkQueue()}},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(C,{rootStore:this.props.rootStore}),Object(x.jsxs)("div",{className:P.a.addonsContainer,children:[Object(x.jsx)(q,{rootStore:this.props.rootStore}),Object(x.jsx)(I,{rootStore:this.props.rootStore})]})]})}}]),n}(s.Component))||S)||S,D=Object(u.c)(y=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(r.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsx)(T,{})})}}]),n}(s.Component))||y;t.default=D}}]);
//# sourceMappingURL=3.dee10ec8.chunk.js.map