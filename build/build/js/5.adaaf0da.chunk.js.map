{"version":3,"sources":["components/Auth/index.css","components/Auth/auth.js","pages/auth.js"],"names":["module","exports","Authentication","props","state","isAuth","errors","accessToken","URL","window","location","href","searchParams","get","localStorage","getItem","undefined","this","setState","clear","setItem","rootStore","getUser","getGuild","className","styles","auth","authContent","oauth2Discord","id","map","error","errorCard","title","description","Component","Auth","inject","observer","key","history"],"mappings":"oFACAA,EAAOC,QAAU,CAAC,KAAO,kBAAkB,YAAc,yBAAyB,cAAgB,2BAA2B,UAAY,uBAAuB,MAAQ,qB,oHC8CzJC,E,kDA5CX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTC,QAAQ,EACRC,OAAQ,IAJG,E,qDASnB,WACI,IAAIC,EAAc,IAAIC,IAAIC,OAAOC,SAASC,MAAMC,aAAaC,IAAI,SAAU,IAAIL,IAAIC,OAAOC,SAASC,MAAMC,aAAaC,IAAI,SAAYJ,OAAOK,aAAaC,QAAQ,SAAWN,OAAOK,aAAaC,QAAQ,cAAUC,EACnN,IAAKT,EAGD,OAFAU,KAAKC,SAAS,CAACb,QAAQ,SACvBI,OAAOK,aAAaK,QAGxBV,OAAOK,aAAaM,QAAQ,QAASb,GACrCU,KAAKd,MAAMkB,UAAUC,QAAQf,GAC7BU,KAAKd,MAAMkB,UAAUE,SAAShB,K,oBAGlC,WACI,OACI,sBAAKiB,UAAWC,IAAOC,KAAvB,UACI,8HACET,KAAKb,MAAMC,QAAW,sBAAKmB,UAAWC,IAAOE,YAAvB,UACpB,sQACA,mBAAGH,UAAWC,IAAOG,cAAeC,GAAI,QACpClB,KAAK,oBADT,wBAKHM,KAAKb,MAAME,OAAOwB,KAAI,SAAAC,GAAK,OACxB,sBAAKP,UAAWC,IAAOO,UAAvB,UACI,qBAAKR,UAAWC,IAAOQ,MAAvB,SACI,6BAAKF,EAAME,UAEf,4BAAIF,EAAMG,gBAJ2BH,EAAME,iB,GAlCtCE,aCIvBC,EAFLC,YAAO,Y,GACPC,Y,oDAEG,WAAYnC,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTmC,IAAK,IAHM,E,0CAMnB,WACI,OACI,cAAC,EAAD,CAAgBlB,UAAaJ,KAAKd,MAAMkB,UAAWmB,QAAWvB,KAAKd,MAAMqC,c,GATlEL,e,MAcJC","file":"build/js/5.adaaf0da.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"index-auth-xHdD\",\"authContent\":\"index-authContent-GRYj\",\"oauth2Discord\":\"index-oauth2Discord-2DVW\",\"errorCard\":\"index-errorCard-3Ifh\",\"title\":\"index-title-3rs8\"};","import React, {Component} from 'react';\r\nimport styles from \"./index.css\";\r\nclass Authentication extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isAuth: false,\r\n            errors: []\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        let accessToken = new URL(window.location.href).searchParams.get('token')? new URL(window.location.href).searchParams.get('token') :  window.localStorage.getItem('token')?  window.localStorage.getItem('token'): undefined\r\n        if (!accessToken) {\r\n            this.setState({isAuth: false})\r\n            window.localStorage.clear()\r\n            return;\r\n        }\r\n        window.localStorage.setItem('token', accessToken)\r\n        this.props.rootStore.getUser(accessToken)\r\n        this.props.rootStore.getGuild(accessToken)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles.auth}>\r\n                <h2>Добро пожаловать</h2>\r\n                {!this.state.isAuth && (<div className={styles.authContent}>\r\n                    <p>Для того, чтобы войти, авторизируйтесь через</p>\r\n                    <a className={styles.oauth2Discord} id={'login'}\r\n                        href=\"/api/discord/auth\">\r\n                        Discord\r\n                    </a>\r\n                </div>)}\r\n                {this.state.errors.map(error => (\r\n                    <div className={styles.errorCard} key = {error.title}>\r\n                        <div className={styles.title }>\r\n                            <h3>{error.title}</h3>\r\n                        </div>\r\n                        <p>{error.description}</p>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default Authentication;","import React, {Component} from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport Authentication from \"../components/Auth/auth\";\r\n\r\n@inject(\"rootStore\")\r\n@observer\r\nclass Auth extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            key: ''\r\n        }\r\n    }\r\n    render(){\r\n        return (\r\n            <Authentication rootStore = {this.props.rootStore} history = {this.props.history}/>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Auth;\r\n"],"sourceRoot":""}